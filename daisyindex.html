<!doctype html>
<html>
	<head>
		<title>DaisyHead (2013)</title>
		<script src="/socket.io/socket.io.js"></script>
		<script src="js/jquery.js"></script>
		<script src="js/jquery-ui-1.10.2/ui/jquery-ui.js"></script>
		<script src="tuna/tuna.js"></script>
		<script src="js/daisies2.js"></script>
		<script src="js/gibberish_2.0.min.js"></script>
		<script src="js/nexusUI.min.js"></script>
		<link href='styles/daisyhead.css' type='text/css' rel='stylesheet'>
	</head>
	<body onkeydown="handleKeys(event)">
		

		<!--

			******README*********
			******README*********
			******README*********

			Hey guys,

			Sorry I'm out of town.

			DAISYHEAD has changed just a little bit.
			One person (I delegate Zak) will launch a pulse that never dies.
			Other players control their own pitch, duration, timbre, envelope
			(but they don't launch pulses anymore).
			Control your pitch by pressing a,b,c,d,e,f,g
			Advice:
			Keep most of your durations fast (100ms)
			Stay mostly on C.
			Other pitches have an echo effect with random timing.
			Patterns are good. Chords are good. Keep the pulse fast. Chat wisely and listen.

			PEARL RIVER
			I put a chat window on the bottom.
			Also, I put buttons near the bottom to choose your register (low/high)

			TRANSITIONING FROM DAISYHEAD TO PEARL RIVER
			Make a small loop between only 2 or 3 people in daisyhead
			Other players may leave (so long as they are not being connected to!!) 
			Leave via the link in the bottom right corner.
			One player in daisyhead should assume control of the pulse
			by connecting to him/herself (use arrow keys) to create a drone.
			That player should set values to: 
			Timbre=bright
			Envelope=Verp
			Duration=300
			Octave=Medium
			Pitch=A
			As players enter Pearl River, trace only the gray (even numbered) bars
			2-3 minutes later, last player leaves Daisyhead via the link in bottom right corner.
			Then you can do whatever you want in Pearl River. Just listen and play carefully.


			Last thing: LAUNCHING THE DAISYHEAD PULSE
			Zak, to begin Daisyhead...
			Open up your javascript console (Command + Option + J in Chrome)
			type:
			daisyBloom()
			and press enter
			if the pulse ever dies for more than about 10 seconds, do this again.


		-->
		
		
		<style>
			
			body {

				padding:0px;

			}

			.numbox {
				color:#444;
				background-color:#eee;
				border-radius:10px;
				-moz-border-radius:10px;
				-webkit-border-radius:10px;
				border:solid 2px #ddd;
				text-align:center;
				margin:5px;
				width:200px;
				padding:5px;
			}
			
			.numtype {
				font-size:12pt;
				background-color:#ddd;
				padding:2px;
				
			}
			
			.num {
				font-size:20pt;
			}
			
		</style>
		
		
		
		<div id="welcome" style="display:block">
			
			<div id="welcometitle">Daisyhead</div>
			
			<div id="welcomenote"><br>a networked music performance piece<br><br><br>insert name<br></div>
			
			<input id="nameinput" type="text" onkeydown="submitName(event,this.value)"></input>
			
		</div>
		
		
		<div style="width:900px;padding-bottom:70px;background-color:#f7f7f7;border:solid 1px #ddd;margin:20px auto;position:relative;border-radius:7px;-webkit-border-radius:7px;-moz-border-radius:7px;">
		
		<!--	<div style="position:absolute;right:10px;top:0px;width:175px;text-align:center;font-size:40pt;font-family:courier;color:#aaa;">D a i s y H e a d</div>
		-->	
			<div style="position:absolute;top:50%;left:52%;margin-top:-103px;width:20%;text-align:center;font-size:60px;font-family:courier;color:#ccc;">D a i s y H e a d</div>
		
			<div id="room" style="margin-top:70px;margin-left:360px">
				<div id="users_circle" style="background-color:transparent"></div>
				<canvas id="paths"></canvas>
				<div id="users"></div>
			</div>
		
		
			<div style="position:absolute;top:0px;left:0px;height:100%;width:100%;z-index:9;">
			<!--	<input id="daisyeditor" onkeydown="editDaisy(event,this.value)" type="text"></input> -->
				<div style="color:#777;font-size:10pt;font-weight:bold;margin:10px;">
					
				</div>
				<!-- <canvas nx="multislider" style="display:block;height:100px;width:215px;margin:5px;"></canvas> -->

				<div class="numbox">
					<div class="numtype">(1) timbre</div>
					<div class="num" id="timbreinfo">soft</div>
				</div>
				<div class="numbox">
					<div class="numtype">(2) envelope</div>
					<div class="num" id="envinfo">ping</div>
				</div>
				<div class="numbox">
					<div class="numtype">(3) duration</div>
					<div class="num" id="durinfo">100</div>
				</div>
				<div class="numbox">
					<div class="numtype">(4) octave</div>
					<div class="num" id="octinfo">medium</div>
				</div>
				<div class="numbox">
					<div class="numtype">(a-g) pitch</div>
					<div class="num" id="pitchinfo">A</div>
				</div>
				<div class="numbox" style="overflow:hidden;height:140px">
					<input class="numtype" value="chat" id="chatinput" onkeypress="submitChat(event)" type="text" style="-webkit-border-radius:3px;border-radius:3px;display:block;border:solid 0px white;width:95%;margin:3px;outline:1px #555;font-size:9pt;padding:4px;"></input>
					<div class="num" id="chatmessages" style="font-size:10pt;height:50px;text-align:left;padding:5px;"></div>
				</div>
			<!--	<div id="chatbox" style="height:100px;z-index:9;width:210px;padding:7px;overflow:hidden;">
					<input id="chatinput" onkeypress="submitChat(event)" type="text" style="width:203px;font-size:10pt;border:solid 1px #777;-webkit-border-radius:3px;border-radius:3px;"></input>
					<div id="chatmessages" style="font-size:10pt"></div>
					
				</div> -->
			<!--	<canvas nx="keyboard" id="mypitch"></canvas> -->
			<!--	<canvas nx="multislider" style="position:absolute;height:100px;width:215px;margin:5px;"></canvas> -->

				<a href="pearlindex.html" style="color:#aaa;display:block;position:absolute;bottom:5px;right:5px;font-size:8pt">go to pearl river</a>
			</div>
			
		<!--	<div style="position:absolute;top:0px;left:0px;height:100%;width:100%;">
				<button onclick="startPulse()" style="width:200px;margin:-50px auto;display:block;position:relative;z-index:9">Start Pulse</button>
		</div> -->
		
		
		
		</div>
		
		
		
		
		
		<script>
		
		
			$("#welcome input").focus();
			
			function submitName(e, val) {
				if (event.which==13) {
					myName=val;
					$("#welcome").html('<div id="welcomenote"><br><br>connecting...<br><br></div>');
				}
			}
		

		/*
			nx.onload = function() {
				
				nx.colorize("#0cb");
				multislider1.setNumberOfSliders(40);
				multislider1.draw();
				
				multislider1.values = [0.9, 0.8, 0.7, 0.6, 0.5, 0.4, 0.3, 0.2, 0.1 ];
				for (var i=8;i<40;i++) {
					multislider1.values[i]=0;
				}
				multislider1.draw();
				
				
				
				multislider2.values = [0.9, 0.8, 0.7, 0.6, 0.5, 0.4, 0.3, 0.2, 0.1, 0, 0, 0, 0, 0, 0];
				multislider2.draw();
				
				nx.setTransmissionProtocol("local");
  
			    // receive wavetable multislider
			  
			    multislider1.localTransmit = function(data) {
			      
			      	var curveLength = 40;
					var curve1 = new Float32Array(curveLength);
					var curve2 = new Float32Array(curveLength);
					for (var i = 0; i < curveLength; i++) {
					    curve1[i] = data[i];
					}
					 
					for (var i = 0; i < curveLength; i++) {
					    curve1[i] = data[i];
					}
					 
					var waveTable = context.createPeriodicWave(curve1, curve1);
					
					for (var i = 0; i < sound.length; i++) {
					//	sound[i].osc.setPeriodicWave(waveTable);
					}
			
			    }
			  
			  	 multislider1.localTransmit(multislider1.values)
			  	// 
			  
			    multislider2.localTransmit = function(data) {
			    	
			    	multislider2.values[multislider2.values.length-1] = 0;
			    	
			   } 
				
			}
			*/

			
		</script>
		
		
				
	</body>
</html>